{contentType text}
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<manialink name="EvoSC:update-maps" id="update-maps" version="3">
    <script>
        <!--
        main(){
            declare Text[Text][] Maps for UI;
            declare Text[Text][Integer] MapAuthors for UI;
            declare Integer MapUpdateTime for UI;
            declare Text mapAuthorsJson = """{$mapAuthors|noescape}""";
            MapAuthors.fromjson(mapAuthorsJson);

            declare Text[Text][] MapsTemp;
            declare Text[Text][] MapsTemp2;

            {foreach $maps as $chunk}
            MapsTemp2.fromjson("""{$chunk->values()->toJson()|noescape}""");
            foreach(map in MapsTemp2){
                MapsTemp.add(map);
            }
            {/foreach}

            Maps = MapsTemp;
            MapUpdateTime = GameTime;
        }
        -->
    </script>
</manialink>